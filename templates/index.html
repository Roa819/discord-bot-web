{% extends "base.html" %}

{% block title %}ãƒ¬ã‚¤ãƒ‰ãƒœã‚¹ä¸€è¦§ - è¨ä¼è¨˜éŒ²{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <h1 class="mb-4">ğŸ¯ ãƒ¬ã‚¤ãƒ‰ãƒœã‚¹ä¸€è¦§</h1>
    </div>
</div>

{% if bosses %}
<div class="row">
    {% for boss in bosses %}
    <div class="col-md-6 col-lg-4 mb-4">
        <div class="card {% if boss.defeated %}border-success{% else %}border-danger{% endif %}">
            <div class="card-header {% if boss.defeated %}bg-success text-white{% else %}bg-danger text-white{% endif %}">
                <h5 class="card-title mb-0">
                    {% if boss.defeated %}
                        âœ… {{ boss.boss_name }}
                    {% else %}
                        âš”ï¸ {{ boss.boss_name }}
                    {% endif %}
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <strong>ãƒœã‚¹ã‚­ãƒ¼:</strong> <code>{{ boss.boss_key }}</code>
                </div>
                
                {% if boss.defeated %}
                <div class="alert alert-success mb-2">
                    <strong>è¨ä¼å®Œäº†ï¼</strong>
                </div>
                <div class="mb-2">
                    <small class="text-muted">è¨ä¼æ—¥æ™‚:</small><br>
                    {{ boss.defeated_at.strftime('%Y-%m-%d %H:%M:%S') if boss.defeated_at else 'N/A' }}
                </div>
                {% else %}
                <div class="progress mb-3" style="height: 25px;">
                    {% set hp_percent = (boss.current_hp / boss.max_hp * 100) if boss.max_hp > 0 else 0 %}
                    <div class="progress-bar bg-danger" role="progressbar" 
                         style="width: {{ hp_percent }}%"
                         aria-valuenow="{{ boss.current_hp }}" 
                         aria-valuemin="0" 
                         aria-valuemax="{{ boss.max_hp }}">
                        {{ boss.current_hp|int }} / {{ boss.max_hp|int }}
                    </div>
                </div>
                {% endif %}
                
                <div class="mb-2">
                    <small class="text-muted">å‡ºç¾æ—¥æ™‚:</small><br>
                    {{ boss.spawned_at.strftime('%Y-%m-%d %H:%M:%S') if boss.spawned_at else 'N/A' }}
                </div>
                
                <a href="/boss/{{ boss.boss_key }}" class="btn btn-primary w-100 mt-2">
                    è©³ç´°ã‚’è¦‹ã‚‹
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="alert alert-info">
    <h4>ãƒ¬ã‚¤ãƒ‰ãƒœã‚¹ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“</h4>
    <p>ç¾åœ¨ã€è¨˜éŒ²ã•ã‚Œã¦ã„ã‚‹ãƒ¬ã‚¤ãƒ‰ãƒœã‚¹ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
</div>
{% endif %}

<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <h5 class="card-title">ğŸ“Š çµ±è¨ˆæƒ…å ±</h5>
                <p class="mb-0">å…¨ãƒœã‚¹æ•°: <strong>{{ bosses|length }}</strong></p>
                <p class="mb-0">è¨ä¼æ¸ˆã¿: <strong>{{ bosses|selectattr('defeated')|list|length }}</strong></p>
                <p class="mb-0">æˆ¦é—˜ä¸­: <strong>{{ bosses|rejectattr('defeated')|list|length }}</strong></p>
            </div>
        </div>
    </div>
</div>
{% endblock %}
